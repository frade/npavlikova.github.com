---
layout: default
paystationActive: active
pygments: true
---

<div class="row-fluid">
	<div class="span12">                
		 <h2><a name="_Toc226620316">Знакомство с PayStation</h2>

<p>Xsolla PayStation является идеальным инструментом монетизации. Это полностью настраиваемый интерфейс оплаты со всеми функциями, которые могут вам понадобиться. PayStation легко адаптируется к вашим потребностям, от простой кнопки «купить», до множества других вариантов, описанных в данном руководстве. PayStation предоставляет пользователю наиболее удобные способы оплаты, автоматически сортируя их по многим критериям.</p>

<h2><a name="_Toc226620316">PayStation: возможности и преимущества</h2>

<p><b>Гибкость</b> &amp; <b>Юзабилити</b></p>

<p>В зависимости от ваших требований, PayStation может предложить оплату в один клик, или пошаговое прохождение процесса оплаты. «Иксолла» может сохранять информацию о платежах пользователей для упрощения повторных платежей.</p>

<p><b>Локализация &amp; Валюта</b></p>

<p>Простая настройка языка и валюты. PayStation можно локализовать, с его помощью можно автоматически получить курс валют в соответствии с любым банком по вашему выбору.</p>

<p><b>Множество способов оплаты</b></p>

<p>Разделите все способы оплаты на категории или предлагайте самые популярные из них. Играйте со списком – он будет таким, как вы хотите.</p>

<p><b>Ценообразование</b></p>

<p>«Иксолла» может реализовать любой метод расчета стоимости виртуального товара, пересчитать стоимость игровой валюты при выборе способа оплаты, предложить скидки и акции.</p>

<p><b>Создай свой PayStation</b></p>

<p>Сделайте ваш PayStation уникальным для каждой страны, различным в зависимости от культурных особенностей или предпочтительных способов оплаты. Создайте уникальный способ оплаты, совершайте продажи любого размера, проводите рекламные кампании, а также используйте индивидуальные темы для PayStation.</p>

<p><b>Гибкие условия для бизнеса</b></p>

<p>Управление комиссиями и выплаты в разных валютах – все это без дополнительных сделок и платежей.</p>

<p><b>24/7 Мультиязычная поддержка </b></p>

<p>Всплывающие окна с ссылкой на live-чат, бесплатные телефонные номера, MSN, Skype, ICQ, электронная почта. Наша служба поддержки работает с теми пользователями, которые не смогли завершить платеж, помогая им найти наилучшие способы оплаты и завершить процесс прохождения платежа.</p>

<h2><a name="_Toc226620316">Аудитория</a></h2>

<p>Этот документ предназначен для разработчиков, собирающихся интегрировать PayStation в проект. Документ предполагает базовые знания об API, запросах HTTP и архитектуре программного обеспечения.</p>

<h2><a name="_Toc226620316">PayStation: шаг за шагом </h2>

<p>В этом разделе описан процесс проведения платежа через PayStation.</p>

<h3>Шаг 1. Выбор способа оплаты</h3>

<p>На первой странице PayStation предлагает пользователю выбрать один из доступных способов оплаты. Все способы оплаты делятся на категории.</p>

<p>Пользователь видит самые удобные, эффективные и популярные способы оплаты, в зависимости от региона пользователя и предыдущих платежей, типа игры, и так далее. Пользователь может просматривать полный список доступных вариантов оплаты, нажав кнопку "Больше".</p>

<p>Пользователь может найти способ оплаты посредством поиска. PayStation предлагает список всех поддерживаемых стран, и, когда пользователь выбирает страну, происходит изменение списка способов оплаты; отображаются только те способы оплаты, которые доступны на территории выбранной страны.</p>

<p>В верхней части PayStation отображает переданные параметры: название проекта, ник, и количество игровой валюты. В нижней части PayStation предлагает горячую линию, кнопку чата и ссылка на поддержку 24/7.</p>

![шаг 1](https://github.com/npavlikova/-----------------------/blob/3/%D0%9A%D0%B0%D1%80%D1%82%D0%B8%D0%BD%D0%BA%D0%B8%20%D0%BA%20payStation%20on%20github/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202013-04-08%20%D0%B2%2014.18.20.png?raw=true)

<p>Если все небходимые параметры переданы, PayStation перемещает пользователя на сайт платежной системы. Если данных для инициализации платежа недостаточно, PayStation пытается собрать недостающую информацию о пользователе.</p>

<h3>Шаг 2. Сбор информации о пользователе</h3>

<p>На этой странице пользователь вводит данные, необходимые для оплаты. PayStation предоставляет шаг за шагом инструкции для процесса оплаты. В верхней части страницы отображаются советы для оплаты (наименование платежа, минимум / максимум игровой валюты, суммы платежа).</p>

<p>После того, как пользователь заполняет все поля и нажимает "Далее", PayStation перемещает пользователя на сайт выбранной системы платежа. Нажатие кнопки "Назад" возвращает пользователя к шагу 1.</p>
![шаг 2](https://github.com/npavlikova/-----------------------/blob/3/%D0%9A%D0%B0%D1%80%D1%82%D0%B8%D0%BD%D0%BA%D0%B8%20%D0%BA%20payStation%20on%20github/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202013-04-08%20%D0%B2%2014.18.33.png?raw=true)

<h3>Шаг 3. Отображение информации о статусе платежа</h3>

<p>После завершения процесса оплаты, PayStation отображает страницу статуса платежа. Пользователь будут перемещен на страницу статуса, содержащую ID транзакции, данные пользователя и дату платежа.</p>
![шаг 3](https://github.com/npavlikova/-----------------------/blob/3/%D0%9A%D0%B0%D1%80%D1%82%D0%B8%D0%BD%D0%BA%D0%B8%20%D0%BA%20payStation%20on%20github/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%202013-04-08%20%D0%B2%2014.24.10.png?raw=true)
<b><br />
</b> <a name="_Toc226620316"><h2>Варианты представления плагина</h2>

<p>Варианты представления плагина – на сайте, во всплывающем окне или в лайтбоксе.</p>

<h3>На сайте</h3>

```sql
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
	</head>
	<body>
		<iframe id="paystation" src="https://secure.xsolla.com/paystation/index.php?
                                 project=4783&email=support@xsolla.com&v1=demo&out=10" 
                                 width="100%" height="100%">
		</iframe>
	</body>
</html>

```
<h3>Всплывающее окно</h3>

```sql
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script type="text/javascript">
	function Popup()
	{
		this.open = function(ob)
		{
			$(ob).hide();
			$('<span id="psload">Payment is in progress...</span>').insertAfter(ob);
			var win = window.open('https://secure.xsolla.com/paystation/
                                          ?theme=115&project=[project]&v1=[v1]&v2=[v2]&v3=[v3]&out=[out]&email=[email]
                                          &sign=[sign]&local=[local]','PayStation', 'width=850px, height=550px, 
                                          scrollbars=yes, status=no');
			setTimeout(
				function()
				{
					if(win.closed)
					{
						$('#psload').remove();
						$(ob).show();
					}
					else
					{
						setTimeout(arguments.callee,500);
					}
				},
				500
			);
		}
	}
	popup = new Popup;
</script>

```
<h3>Лайтбокс</h3>

```sql
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<script type="text/javascript" src="https://secure.xsolla.com/paystation/lightbox/jquery-1.4.js">
                </script>
		<script type="text/javascript" src="https://secure.xsolla.com/paystation/lightbox/jquery-ui-1.8.9.custom.js">
                </script>
		<script type="text/javascript" src="https://secure.xsolla.com/paystation/js/lightbox.js">
                </script>
		<script type="text/javascript">
			var paystationparams = {theme: ThemeID, v1: Ident, out: Out, email: EMail}
		</script>
	</head>
	<body>
		<a href="#" onclick="LightBox.show(4783)">PayStation</a>
	</body>
</html>

```
</b> <a name="_Toc226620316"><h2>Интеграция PayStation </h2>

<p> PayStation настраивается с помощью перечисленных ниже параметров.</p>

<p>Прямая ссылка на PayStation без каких-либо параметров: </p>

    https://secure.xsolla.com/paystation2/?marketplace=paystation

<p><a><b>Важно!</b></a> Параметры должны передаваться в кодировке UTF-8.</p>

<table border="1" cellspacing="0" cellpadding="0" > 
<tbody>
<tr>
<td><p><b>Название поля </b></p></td>
<td><p><b>Тип</b></p></td>
<td><p><b>Описание </b></p></td>
<td><p><b>Обязательный </b></p></td>
<td><p><b>Пример</b></p></td>
</tr>

<tr>
<td><p>project</p></td>
<td><p>Integer</p></td>
<td><p>Идентификатор проекта в системе «Иксолла». Можно узнать в личном кабинете «Иксолла»</p></td>
<td><p>Да</p></td>
<td><p>4783</p></td>
</tr>

<tr>
<td><p>theme</p></td>
<td><p>Integer</p></td>
<td><p>Идентификатор темы в системе «Иксолла», отвечающий за оформление маркетплейса</p></td>
<td><p>Да</p></td>
<td><p>100</p></td>
</tr>

<tr>
<td><p>v1</p></td>
<td><p>String (255 символов)</p></td>
<td><p>Параметр идентификации пользователя</p></td>
<td><p>Да </p></td>
<td><p>demo</p></td>
</tr>

<tr>
<td><p>v2</p></td>
<td><p>String (255 символов)</p></td>
<td><p>Дополнительный параметр идентификации пользователя</p></td>
<td><p>Нет (в зависимости от настроек проекта)</p></td>
<td><p>0</p></td>
</tr>

<tr>
<td><p>v3</p></td>
<td><p>String (100 символов)</p></td>
<td><p>Дополнительный параметр идентификации пользователя</p></td>
<td><p>Нет (в зависимости от настроек проекта)</p></td>
<td><p>0</p></td>
</tr>

<tr>
<td><p>email</p></td>
<td><p>String</p></td>
<td><p>E-mail пользователя</p></td>
<td><p>Нет</p></td>
<td><p>support@</p>

<p>xsolla.com</p></td>
</tr>

<tr>
<td><p>phone</p></td>
<td><p>String</p></td>
<td><p>Номер телефона пользователя (в международном формате)</p></td>
<td><p>Нет</p></td>
<td><p>79001234567</p></td>
</tr>

<tr>
<td><p>out</p></td>
<td><p>Float</p></td>
<td><p>Количество игровой валюты. Разделитель «.» (два знака после точки)</p></td>
<td><p>Нет</p></td>
<td><p>10.98</p></td>
</tr>

<tr>
<td><p>local</p></td>
<td><p>String</p></td>
<td><p>Язык интерфейса (локализация)</p>

<p><i>См. Примечание 1</i></p></td>
<td><p>Нет</p></td>
<td><p>ru</p></td>
</tr>

<tr>
<td><p>country</p></td>
<td><p>String</p></td>
<td><p>Страна</p>

<p><i>См. Примечание 2</i></p></td>
<td><p>Нет</p></td>
<td><p>RU</p></td>
</tr>

<tr>
<td><p>currency</p></td>
<td><p>String</p></td>
<td><p>Валюта платежа пользователя</p>

<p><i>См. Примечание 3</i></p></td>
<td><p>Нет</p></td>
<td><p>RUB</p></td>
</tr>

<tr>
<td><p>userip</p></td>
<td><p>String</p></td>
<td><p>IP-адрес пользователя</p></td>
<td><p>Нет</p></td>
<td><p>127.168.0.1</p></td>
</tr>

<tr>
<td><p>skip_step</p></td>
<td><p>Boolean</p></td>
<td><p>Параметр определяет, дать ли пользователю возможность изменять некоторые поля на форме заполнения данных (суммы, e-mail и т. д.) </p>

<p><i>см.</i> <i>Примечание 4</i></p></td>
<td><p>Нет</p></td>
<td><p>1</p>

<p>(по умолчанию)</p>

</td>
</tr>

<tr>
<td><p>description</p></td>
<td><p>String(100 символов)</p></td>
<td><p>Описание покупки </p>

<p><i>см. Примечание 5</i></p></td>
<td><p>Нет</p></td>
<td><p>Золотой статус </p></td>
</tr>

<tr>
<td><p>hidden</p></td>
<td><p>String</p></td>
<td><p>Скрытие некоторых полей от пользователя на форме оплаты (названия параметров перечисляются через запятую) </p>

<p><i>см. Примечание 6</i></p></td>
<td><p>Нет</p></td>
<td><p>v1,v2,v3,out </p></td>
</tr>

<tr>
<td><p>sign</p></td>
<td><p>String</p></td>
<td><p>Подпись для предотвращения несанкционированного доступа. Решение, передавать или нет подпись, принимает проект</p>

<p><i>см. Примечание 7</i></p></td>
<td><p>Нет</p></td>
<td><p>da3d6d04fd</p>

<p>55985717ac1a</p>

<p>30fa26ff46 </p></td>
</tr>

</tbody>
</table>

<h2><a name="_Toc225577756">Формирование подписи</a></h2>

<p>Решение о том, передавать или нет подпись, принимает проект.</p>

<p>Если параметры 'theme', 'project', 'v1', 'v2', 'v3', 'out', 'currency', 'email', 'userip' переданы, значит они участвуют в подписи. </p>

<p>Параметры сортируются по ключам в алфавитном порядке. Подпись формируется с помощью алгоритма хеширования md5 от строки, получаемой конкатенацией пар "[имя параметра]=[значение параметра]". Также в подписи участвует секретный ключ (секретный ключ можно узнать в Личном кабинете «Иксолла»).</p>

<p>Подпись выглядит следующим образом:</p>

    md5(<ключ1>=<значение1><ключ2>=<значение2>....<ключ>=<значение><secret_key>)

<p>Особенность генерации подписи состоит в том, что вместо значения 'userip', переданного в адресной строке, подставляется реальный IP-адрес пользователя. Ниже рассмотрим формирование подписи для конкретного проекта (<i>см. Приложение 7</i>).</p>

<h2><a name="_Toc225243080"></a><a name="_Toc225577757"></a><a name="__RefHeading__16300_712129505"></a><a name="__RefHeading__15073_7121295051"></a>Дополнительные сведения и примеры</h2>

<h3><a name="_Toc225577758">Примечание 1</a></h3>

<p>Параметр local. Если передать параметр local, то пользователю будет показан интерфейс в указанной локализации, иначе язык интерфейса определится автоматически, исходя из предыдущих данных о пользователе, IP-адреса и языка браузера<ins cite="mailto:AKVAREL%20Pavlikova" datetime="2013-03-21T10:40">.</ins> Используется двухбуквенное обозначение согласно стандарту <b>ISO 639-1</b>. В данный момент доступны следующие локализации:</p>

<table border="1" cellspacing="0" cellpadding="0" > 
<tbody>
<tr>
<td valign="top" ><p><b>Локализация</b></p></td>
<td valign="top" ><p><b>Обозначение</b></p></td>
<td valign="top" ><p><b>Локализация</b></p></td>
<td valign="top" ><p><b>Обозначение</b></p></td>
</tr>

<tr>
<td valign="top" ><p>русская</p></td>
<td valign="top" ><p>ru</p></td>
<td valign="top" ><p>румынская</p></td>
<td valign="top" ><p>ro</p></td>
</tr>

<tr>
<td valign="top" ><p>английская</p></td>
<td valign="top" ><p>en</p></td>
<td valign="top" ><p>болгарская</p></td>
<td valign="top" ><p>bg</p></td>
</tr>

<tr>
<td valign="top" ><p>французская</p></td>
<td valign="top" ><p>fr</p></td>
<td valign="top" ><p>турецкая</p></td>
<td valign="top" ><p>tr</p></td>
</tr>

<tr>
<td valign="top" ><p>немецкая</p></td>
<td valign="top" ><p>de</p></td>
<td valign="top" ><p>тайская</p></td>
<td valign="top" ><p>th</p></td>
</tr>

<tr>
<td valign="top" ><p>итальянская</p></td>
<td valign="top" ><p>it</p></td>
<td valign="top" ><p>японская</p></td>
<td valign="top" ><p>ja</p></td>
</tr>

<tr>
<td valign="top" ><p>испанская</p></td>
<td valign="top" ><p>es</p></td>
<td valign="top" ><p>корейская</p></td>
<td valign="top" ><p>ko</p></td>
</tr>

<tr>
<td valign="top" ><p>португальская</p></td>
<td valign="top" ><p>pt</p></td>
<td valign="top" ><p>китайская</p></td>
<td valign="top" ><p>cn</p></td>
</tr>

<tr>
<td valign="top" ><p>польская</p></td>
<td valign="top" ><p>pl</p></td>
<td valign="top" ><p>иврит</p></td>
<td valign="top" ><p>he</p></td>
</tr>

<tr>
<td valign="top" ><p>арабская</p></td>
<td valign="top" ><p>ar</p></td>
<td valign="top" ><p>вьетнамская</p></td>
<td valign="top" ><p>vi</p></td>
</tr>

</tbody>
</table>

<h3><a name="_Toc225577759">Примечание 2</a></h3>

Параметр country. Если параметр country передан, пользователю будет показан список доступных стране платежных опций, в противном случае страна будет определена автоматически, исходя из предыдущих данных о пользователе и IP-адреса. Используется двухбуквенное обозначение страны согласно стандарту **ISO 3166-1 alpha-2**.

<h3><a name="_Toc225577760">Примечание 3</a></h3>

<p>Параметр currency. Если параметр currency передан, и выбранная платежная система поддерживает переданную валюту, то она будет предложена пользователю. Используется трехбуквенное обозначение валюты согласно стандарту <b>ISO 4217</b>.</p>

<h3><a name="_Toc225577761">Примечание 4</a></h3>

<p>Параметр skip_step. Пользователь demo собирается оплатить игровую валюту в размере out=10. В примере передаются данные, необходимые для отправки пользователя на сайт webmoney. </p>

<p>Параметр skip_step имеет значение: </p>

<p>0 — при выборе платежной системы(webmoney) пользователь будет иметь возможность изменить данные - указать другую сумму к оплате, другой e-mail, и т.д.</p>

    https://secure.xsolla.com/paystation2/marketplace=paystation&theme=115&project=4783&v1=demo&out=10&email=support@xsolla.com&
    skip_step=0&currency=RUB

<p>1 — пользователь будет перенаправлен на сайт платежной системы(webmoney) с имеющимися параметрами:</p>

    https://secure.xsolla.com/paystation2/marketplace=paystation&theme=115&project=4783&v1=demo&out=10&email=support@xsolla.com&
    skip_step=1&currency=RUB

<h3><a name="_Toc225577762">Примечание 5</a></h3>

<p>Параметр description. Если проект продает не игровую валюту, а некий товар или услугу, нуждающуюся в дополнительном описании, используется параметр description (описание отобразится после выбора платежной системы):</p>

    https://secure.xsolla.com/paystation2/marketplace=paystation&theme=115&project=2849&v1=demo&out=10&skip_step=0&description=
    Золотой статус

<h3><a name="_Toc225577763">Примечание 6</a></h3>

<p>Параметр hidden. Поля, которые необходимо скрыть от пользователя, передаются в параметре hidden. </p>

<p>Если скрыть out и v1, то ссылка на плагин будет выглядеть следующим образом (после выбора платежной системы скрытые поля не отобразятся):</p>

    https://secure.xsolla.com/paystation2/marketplace=paystation&theme=115&project=4783&v1=demo&out=10&hidden=out,v1

<p><b>Важно! </b>Пользователь не может изменять скрытые параметры.</p>

<p>Та же ссылка, если не скрывать поля:</p>
    https://secure.xsolla.com/paystation2/?marketplace=paystation&theme=115&project=4783&v1=demo&out=10

<h3><a name="_Toc225577764">Примечание 7</a></h3>

<p>Параметр sign. Для отправки пользователя на страницу плагина, с учетом, что в проекте 7096 ник пользователя - "demo", электронный адрес - "support@xsolla.com", количество игровой валюты - "10" и секретный ключ - "key", то подпись формируется следующим образом:</p>

    md5(email=support@xsolla.comout=10project=7096theme=100v1=demokey)

<p>Если подпись передана, то ссылка на плагин выглядит следующим образом:</p>

    https://secure.xsolla.com/paystation2/?marketplace=paystation&theme=115& skip_step=0&project=7096&v1=demo&out=10&email=
    support@xsolla.com&sign=b305bc024e98ce774bbe303e7077a915
	</div>
</div>
